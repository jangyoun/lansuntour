"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{4882:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var i=n(5893),o=n(7294),s=n(2970),r=n(636),d=n(381),l=n.n(d),a=n(2266),c=n.n(a),f=n(9462),u=n(4111),h=n(7568),p=n(1438),x=n(8029),v=n(797),g=n(460),y=n(655),m=n(3935),j=n(7637),k=n(991),w=function(e){return(0,o.useEffect)(function(){},[]),(0,i.jsx)("div",{id:"region-festival-".concat(e.festival.id),onClick:function(){return e.onClickMarker(e.festival)},children:(0,i.jsxs)("div",{style:{margin:0,padding:0,lineHeight:1,fontSize:4,fontWeight:"bold"},children:[e.festival.title.replace(/(\s*)/g,"").substring(0,2),(0,i.jsx)("br",{}),e.festival.title.replace(/(\s*)/g,"").substring(2,4)]})})},b=n(1143),M=function(e){(0,x.Z)(n,e);var t=(0,g.Z)(n);function n(e){(0,p.Z)(this,n),(i=t.call(this,e)).mKakaoMap=null,i.mRegions=[],i.mFestivals=[];var i,r=(0,u.Z)(i);return i.getInfoByNetwork=(0,h.Z)(function(){var e,t,n,i;return(0,y.__generator)(this,function(t){switch(t.label){case 0:return r.props.onLoading(),e=r.mKakaoMap.getBounds(),r.mKakaoMap.getCenter(),[4,fetch(s.Xb.URL+"/api/tour/festivals/map/grid?swLng=".concat(e.oa,"&swLat=").concat(e.pa,"&neLng=").concat(e.ha,"&neLat=").concat(e.qa))];case 1:return[4,t.sent().json()];case 2:return i=t.sent(),r.props.onGridChanged(i),r.renderGrid(i),[2]}})}),i.mMapContainer=o.createRef(),i}var r=n.prototype;return r.render=function(){return(0,i.jsx)("div",{ref:this.mMapContainer,style:{height:"100%",width:"100%"}})},r.componentDidMount=function(){var e=this,t={center:new kakao.maps.LatLng(37.5739449022336,126.9768214538364),level:10};this.mKakaoMap=new kakao.maps.Map(this.mMapContainer.current,t),kakao.maps.event.addListener(this.mKakaoMap,"zoom_start",function(){(0,j.Z)(e.mRegions,function(e){e.marker.setMap(null),e.polygon.setMap(null)}),(0,j.Z)(e.mFestivals,function(e){e.marker.setMap(null),e.polygon.setMap(null)})}),kakao.maps.event.addListener(this.mKakaoMap,"zoom_end",function(){return e.getInfoByNetwork()}),kakao.maps.event.addListener(this.mKakaoMap,"dragend",function(){return e.getInfoByNetwork()}),this.getInfoByNetwork()},r.renderGrid=function(e){var t=this,n=[],o=[];(0,j.Z)(e,function(e){var i=(0,k.Z)(t.mFestivals,function(t){return t.festival.id===e.id});if(i){n.push(i);return}var s=new kakao.maps.CustomOverlay({position:new kakao.maps.LatLng(e.latitude,e.longitude),content:'<div id="'.concat(e.id,'" class="').concat(c().icon_festival,'" />'),zIndex:0}),r=new b.i;o.push({festival:e,marker:s,polygon:r})}),(0,j.Z)(this.mFestivals,function(e){(0,k.Z)(n,function(t){return t.festival.id===e.festival.id})||e.marker.setMap(null)}),this.mFestivals=(0,v.Z)(n).concat((0,v.Z)(o)),(0,j.Z)(this.mFestivals,function(e){e.marker.getMap()||e.marker.setMap(t.mKakaoMap);var n=document.getElementById("".concat(e.festival.id));n&&m.render((0,i.jsx)(w,{festival:e.festival,onClickMarker:function(e){return t.props.onClickMarker(e)}}),n)})},n}(o.Component),C=n(1382),Y=n(7937),D=n(7117),S=n(1080),I=n.n(S),Z=function(e){var t,n,r,d=(0,o.useState)(!1),a=d[0],f=d[1],u=(0,o.useState)(null),p=u[0],x=u[1];(0,o.useEffect)(function(){e.id&&(console.log("useEffect",e.id),m(e.id))},[e.id]);var v,g=function(){f(!0),e.onClose()},m=(v=(0,h.Z)(function(e){var t,n,i;return(0,y.__generator)(this,function(t){switch(t.label){case 0:return f(!0),[4,new Promise(function(e){return setTimeout(e,500)})];case 1:return t.sent(),[4,fetch(s.Xb.URL+"/api/tour/festivals/info/".concat(e))];case 2:return[4,t.sent().json()];case 3:return i=t.sent(),f(!1),x(i),[2]}})}),function(e){return v.apply(this,arguments)});return(0,i.jsx)(i.Fragment,{children:e.hidden?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{top:(null===(t=e.postion)||void 0===t?void 0:t.top)-(null===(n=e.postion)||void 0===n?void 0:n.height)-30,left:(null===(r=e.postion)||void 0===r?void 0:r.left)+17,width:20,height:20,position:"absolute"},children:[(0,i.jsx)("div",{className:I().pin,style:{zIndex:13,backgroundColor:"#fff"}}),(0,i.jsx)("div",{className:I().pulse,style:{zIndex:12,backgroundColor:"#fff"}})]}),(0,i.jsxs)("div",{style:{width:"100%",height:"100%",position:"absolute",zIndex:10,display:"flex"},children:[(0,i.jsx)("div",{style:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.7)"},onClick:function(){return g()}}),(0,i.jsxs)("div",{style:{width:480,backgroundColor:"#fff",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)("div",{style:{display:"flex",fontSize:14,padding:4},children:[(0,i.jsx)("div",{className:c().close_text,onClick:function(){return g()},children:(0,i.jsx)(Y.Z,{})}),(0,i.jsx)("div",{style:{flex:1,textAlign:"center",fontWeight:"bold"},children:e.name})]}),(0,i.jsx)("div",{style:{backgroundColor:"#004ea7",height:1}}),a?(0,i.jsxs)("div",{style:{width:460,backgroundColor:"#fff",textAlign:"center",paddingTop:20},children:[" ",(0,i.jsx)(C.Z,{size:"large"})]}):(0,i.jsxs)("div",{style:{flex:1,overflow:"auto",fontSize:12},children:[(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsx)("div",{style:{width:60,backgroundColor:"#f0f0f0",textAlign:"center",padding:4},children:"축제"}),(0,i.jsxs)("div",{style:{flex:1,cursor:"pointer",padding:"4px 10px"},onClick:function(e){e.preventDefault();var t="https://www.google.com/search?q=".concat(encodeURIComponent(null==p?void 0:p.title));window.open(t,"_blank","noopener,noreferrer")},children:[null==p?void 0:p.title," ",(0,i.jsx)(D.Z,{})]})]}),[{title:"기간",desc:"".concat(l()(null==p?void 0:p.eventstartdate,"YYYYMMDD").format("YYYY.MM.DD")," - ").concat(l()(null==p?void 0:p.eventenddate,"YYYYMMDD").format("YYYY.MM.DD"))},{title:"주소",desc:null==p?void 0:p.addr1},{title:"전화",desc:null==p?void 0:p.tel},].map(function(e,t){return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{backgroundColor:"#ccc",height:1}}),(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsx)("div",{style:{width:60,backgroundColor:"#f0f0f0",textAlign:"center",padding:4},children:e.title}),(0,i.jsx)("div",{style:{flex:1,padding:"4px 10px"},children:e.desc})]})]},t)}),(0,i.jsx)("div",{style:{backgroundColor:"#ccc",height:1}}),(0,i.jsx)("img",{className:c().side_detail_img,src:null==p?void 0:p.firstimage})]})]})]})]})})},N=function(){var e=(0,o.useState)([]),t=e[0],n=e[1],s=(0,o.useState)(!1),d=s[0],a=s[1],u=(0,o.useState)({id:null,name:null,hidden:!0,position:null}),h=u[0],p=u[1],x=l()();return(0,o.useEffect)(function(){},[]),(0,i.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,i.jsx)(f.a1,{}),(0,i.jsxs)("div",{style:{width:"100%",height:"100%",position:"relative"},children:[(0,i.jsxs)("div",{style:{width:"100%",height:"100%",position:"absolute",display:"flex"},children:[(0,i.jsx)("div",{style:{flex:1},children:(0,i.jsx)(M,{onLoading:function(){a(!0),n([])},onGridChanged:function(e){a(!1),n(e.sort(function(){return Math.random()-.5}))},onClickMarker:function(e){var t=document.getElementById("region-festival-".concat(e.id)).getBoundingClientRect();p({id:e.id,name:e.title,hidden:!1,position:t})}})}),(0,i.jsx)("div",{style:{width:480,overflow:"auto"},children:(0,i.jsx)(r.ZP,{dataSource:t,split:!0,loading:d,header:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",height:22},children:[(0,i.jsx)("div",{className:c().festival_title,children:"지역 축제 :: ".concat(t.length,"개")}),(0,i.jsx)("div",{style:{width:210,display:"flex",textAlign:"center"},children:["월","화","수","목","금","토","일","월","화","수","목","금","토","일"].map(function(e,t){return l()().startOf("isoWeek").add(t,"days"),(0,i.jsx)("div",{style:{width:15,fontSize:14,margin:0,padding:0,fontWeight:"bold",color:5==t||6==t||12==t||13==t?"#f04125":"#333"},children:e},t)})}),(0,i.jsx)("div",{style:{width:20}})]}),(0,i.jsx)("div",{style:{backgroundColor:"#ff816e",height:1}})]}),renderItem:function(e,t){return(0,i.jsx)(r.ZP.Item,{style:{padding:0},children:(0,i.jsxs)("div",{style:{width:"100%",position:"relative",height:22},children:[(0,i.jsx)("div",{style:{position:"absolute",zIndex:1,width:"130px",marginTop:3,marginLeft:4,fontSize:10,overflow:"hidden",whiteSpace:"nowrap",fontWeight:"bold",cursor:"pointer"},onMouseOut:function(t){var n=t.target;n.style.background="#fff",n.style.width="130px";var i=document.getElementById("region-festival-".concat(e.id));(null==i?void 0:i.parentNode)&&(i.parentNode.style.background="#000"),(null==i?void 0:i.parentNode.parentNode)&&(i.parentNode.parentNode.style.zIndex=0)},onMouseOver:function(t){var n=t.target;n.style.background="rgba(219, 233, 255, 0.8)",n.style.width="460px";var i=document.getElementById("region-festival-".concat(e.id));(null==i?void 0:i.parentNode)&&(i.parentNode.style.background="#f04125"),(null==i?void 0:i.parentNode.parentNode)&&(i.parentNode.parentNode.style.zIndex=9)},onClick:function(){var t=document.getElementById("region-festival-".concat(e.id)).getBoundingClientRect();p({id:e.id,name:e.title,hidden:!1,position:t})},children:e.title}),(0,i.jsxs)("div",{style:{width:"100%",display:"flex",fontSize:10},children:[(0,i.jsx)("div",{style:{flex:1}}),(0,i.jsxs)("div",{style:{width:90,marginTop:2},children:[(0,i.jsx)("span",{style:{color:"#ddd"},children:"|\xa0\xa0"}),(0,i.jsxs)("span",{children:[l()(e.eventstartdate,"YYYYMMDD").format("MM.DD")," - ",l()(e.eventenddate,"YYYYMMDD").format("MM.DD")]})]}),(0,i.jsx)("div",{style:{width:210,display:"flex"},children:Array.from(Array(14).keys()).map(function(t){var n=l()(e.eventstartdate,"YYYYMMDD"),o=l()(e.eventenddate,"YYYYMMDD"),s=l()().startOf("isoWeek").add(t,"days"),r=x.isSameOrBefore(s,"d"),d=s.isBetween(n,o,"days","[]");return(0,i.jsxs)("div",{style:{width:15,position:"relative"},children:[(0,i.jsxs)("span",{style:{fontSize:10,color:"#ddd",width:14,position:"absolute",marginTop:3,display:"flex",alignItems:"center",justifyContent:"center"},children:[" ",s.format("D")]}),(0,i.jsx)("div",{style:{height:14,width:14,marginTop:3,borderRadius:3,backgroundColor:d?r?"#004ea7":"#bbb":"#fff"}})]},t)})}),(0,i.jsx)("div",{style:{width:20}})]})]})},t)}})})]}),(0,i.jsx)(Z,{id:h.id,name:h.name,hidden:h.hidden,postion:h.position,onClose:function(){return p({id:null,name:null,hidden:!0,position:null})},onMove:function(e,t,n){console.log("onMove",e,t,n)}})]}),(0,i.jsx)(f.r,{})]})},z=n(5439),_=n(3015),L=function(){var e=(0,o.useState)({main:"0",sub:"0"});e[0],e[1];var t,n=(0,o.useState)([]),d=n[0],a=n[1],u=(0,o.useState)(!1),p=u[0],x=u[1],v=l()();(0,o.useEffect)(function(){g(0,0)},[]);var g=(t=(0,h.Z)(function(e,t){var n,i,o;return(0,y.__generator)(this,function(i){switch(i.label){case 0:return console.log("onSelectCities :: main",e,"sub",t),n=s.Xb.URL+"/api/tour/festivals/list/type?main=".concat(e,"&sub=").concat(t),console.log("url",n),[4,fetch(n)];case 1:return[4,i.sent().json()];case 2:return o=i.sent(),console.log("data",o),[4,new Promise(function(e){return setTimeout(e,1e3)})];case 3:return i.sent(),x(!1),a(o),[2]}})}),function(e,n){return t.apply(this,arguments)});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{position:"fixed",height:83,zIndex:2,width:"100%"},children:(0,i.jsx)(f.nf,{})}),(0,i.jsx)("div",{style:{zIndex:1,width:"100%",height:"100%",backgroundColor:"#f3f3f3"},children:(0,i.jsx)(r.ZP,{dataSource:d,split:!1,loading:p,header:(0,i.jsxs)("div",{style:{backgroundColor:"#f3f3f3"},children:[(0,i.jsx)("div",{style:{height:83}}),(0,i.jsx)("div",{className:c().hide_scrollbar,style:{display:"flex",margin:"14px 0px 6px 4px",overflow:"auto"},children:(0,i.jsx)(z.Z,{options:_.h.province,onChange:function(e){g(e,0)}})}),(0,i.jsx)("div",{style:{height:4}}),(0,i.jsx)("div",{style:{width:"100%",display:"flex",padding:"2px 6px 2px 6px"},children:["월","화","수","목","금","토","일","월","화","수","목","금","토","일",].map(function(e,t){return(0,i.jsxs)("div",{style:{flex:1,margin:1,position:"relative"},children:[(0,i.jsx)("div",{style:{marginTop:1,width:"100%",position:"absolute",textAlign:"center",fontSize:12,color:"#333"},children:e}),(0,i.jsx)("div",{style:{height:20,borderRadius:3,backgroundColor:[5,6,12,13].includes(t)?"#a6d0ff":"#d6e9ff"}})]},t)})})]}),renderItem:function(e,t){return(0,i.jsx)(r.ZP.Item,{onClick:function(){return window.open("/festival/".concat(e.id),"_self","noopener,noreferrer")},style:{padding:0},children:(0,i.jsx)("div",{style:{width:"100%",backgroundColor:"#f3f3f3",padding:"4px 4px 4px 4px"},children:(0,i.jsxs)("div",{style:{width:"100%",backgroundColor:"#fff",border:"1px #ddd solid",borderRadius:4,display:"flex",flexDirection:"column",fontSize:14},children:[(0,i.jsxs)("div",{style:{height:28,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[(0,i.jsx)("div",{style:{flex:1,fontWeight:"bold",overflow:"hidden",whiteSpace:"nowrap",margin:"0px 6px"},children:e.title}),(0,i.jsx)("div",{style:{width:40,backgroundColor:"#f3f3f3",textAlign:"center",borderRadius:4,marginRight:4},children:e.provinceTitle})]}),(0,i.jsx)("div",{style:{height:1,backgroundColor:"#eee"}}),(0,i.jsxs)("div",{style:{fontSize:14,padding:"2px 6px 2px 6px",display:"flex",flexDirection:"row"},children:[(0,i.jsxs)("div",{style:{width:98,overflow:"hidden",whiteSpace:"nowrap"},children:[l()(e.eventstartdate,"YYYYMMDD").format("MM.DD")," - ",l()(e.eventenddate,"YYYYMMDD").format("MM.DD")]}),(0,i.jsx)("div",{style:{width:1,backgroundColor:"#ccc",margin:"4px 0px"}}),(0,i.jsx)("div",{style:{flex:1,overflow:"hidden",whiteSpace:"nowrap",paddingLeft:6},children:e.addr1})]}),(0,i.jsx)("div",{style:{height:1,backgroundColor:"#eee"}}),(0,i.jsx)("div",{style:{width:"100%",display:"flex",padding:"2px 6px 2px 6px"},children:Array.from(Array(14).keys()).map(function(t,n){var o=l()(e.eventstartdate,"YYYYMMDD"),s=l()(e.eventenddate,"YYYYMMDD"),r=l()().startOf("isoWeek").add(t,"days"),d=v.isSameOrBefore(r,"d"),a=r.isBetween(o,s,"days","[]");return(0,i.jsxs)("div",{style:{flex:1,margin:1,position:"relative"},children:[(0,i.jsx)("div",{style:{marginTop:1,width:"100%",position:"absolute",textAlign:"center",fontSize:12,color:"#333"},children:r.format("D")}),a?d?(0,i.jsx)("div",{style:{height:20,borderRadius:3,backgroundColor:([5,6,12,13].includes(n),"#d6e9ff")}}):(0,i.jsx)("div",{style:{height:20,borderRadius:3,backgroundColor:"#ddd"}}):(0,i.jsx)("div",{style:{height:20}})]},n)})})]})})},t)}})})]})},B=function(){return s.Zr.isDesktop()?(0,i.jsx)(N,{}):(0,i.jsx)(L,{})}}}]);